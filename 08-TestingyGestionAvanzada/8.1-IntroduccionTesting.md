# Introducción al Testing
El testing es una práctica fundamental en el desarrollo de software, utilizada para garantizar que las aplicaciones funcionen según lo esperado. En Angular, las pruebas unitarias permiten verificar que los componentes individuales de una aplicación se comporten correctamente.
- **Objetivos** del Testing
    - **Garantizar la calidad**: Asegurar que la aplicación cumpla con los requisitos definidos.
    - **Detectar errores tempranos**: Identificar errores antes de que lleguen a producción.
    - **Mejorar la mantenibilidad**: Facilitar la incorporación de cambios o nuevas funcionalidades.
- **Beneficios** del Testing
    - **Reducción de costos**: Identificar y corregir errores de forma anticipada reduce los costos de mantenimiento.
    - **Aumento de la confianza**: Se puede implementar nuevo código con mayor seguridad.
    - **Mejora en la calidad del código**: Permite la creación de código más limpio y legible.
- **Ejemplo conceptual**
    - Imagina que desarrollas una calculadora.
    - Un test verificaría que al sumar `2 + 2`, el resultado sea `4`.
    - Si el resultado no coincide, el test fallará, lo que permitirá detectar errores en la lógica de la aplicación.

## Metodología del Testing
### TDD (Test Driven Development)
El Desarrollo Guiado por Pruebas (TDD) consiste en escribir las pruebas antes de programar el código.
- Pasos clave de TDD
    - Definir la prueba: Identificar el objetivo de la prueba.
    - Escribir la prueba: Crear la prueba unitaria.
    - Escribir el código: Desarrollar el código necesario para que la prueba pase.
    - Refactorizar el código: Mejorar la estructura del código, asegurando que la prueba siga pasando.
- Beneficios de TDD
    - Detección temprana de errores: Los errores se detectan antes de la implementación.
    - Código más limpio y mantenible: El código se adapta para cumplir con las pruebas.
    - Facilita la automatización de pruebas: Las pruebas se ejecutan de forma automática.
- Ejemplo práctico de TDD
```ts
describe('ComponenteCalculadora', () => { 
  it('debería mostrar el título correctamente', () => { 
    const tituloEsperado = 'Calculadora Angular'; 
    expect(component.titulo).toBe(tituloEsperado);
  });
});
```
- En este ejemplo, se verifica que el título del componente sea "Calculadora Angular". Si el título cambia, la prueba fallará, lo que permitirá detectar errores de forma inmediata.

### BDD (Behavior Driven Development)
El Desarrollo Guiado por el Comportamiento (BDD) se basa en la definición de un lenguaje común entre el negocio y los desarrolladores.
- Diferencias con TDD
    - BDD se enfoca en el comportamiento de la aplicación desde la perspectiva del usuario.
    - TDD se basa en la creación de pruebas antes de escribir el código.
- Beneficios de BDD
    - Lenguaje común: Facilita la comunicación entre desarrolladores, analistas y clientes.
    - Mejora la claridad: Los requisitos son más claros y comprensibles.
    - Aumenta la colaboración: Todos los equipos (técnicos y no técnicos) pueden participar.
- Ejemplo de Escenario BDD (usando Gherkin)
    - Escenario: Verificar el acceso exitoso de un usuario
        - Dado que un usuario ingresa su nombre de usuario y contraseña
        - Cuando hace clic en el botón "Iniciar sesión"
        - Entonces se redirige a la página de inicio
    - Este escenario de BDD se centra en el comportamiento esperado del usuario cuando accede a la aplicación.

## Herramientas para Testing en Angular
Angular utiliza herramientas específicas para realizar pruebas unitarias. Las más comunes son:

- **Jasmine**
    - Es un framework de pruebas unitarias para JavaScript que se utiliza para escribir pruebas de forma clara y legible.
    - Características principales
        - Sintaxis legible: Permite escribir pruebas con una sintaxis cercana al lenguaje natural.
        - Expectativas (Expect): Define las expectativas que deben cumplirse.
        - Matchers (Comparadores): Compara los valores reales con los esperados.
    - Ejemplo de Jasmine
    ```js
    describe('Prueba de Suma', () => {
        it('debería devolver 4 cuando se suma 2 + 2', () => {
            const resultado = 2 + 2;
            expect(resultado).toBe(4);
        });
    });
    ```
    - En este ejemplo, `expect(resultado).toBe(4)` verifica que la suma de `2 + 2` sea igual a `4`.
- **Karma**
    - Es un ejecutor de pruebas diseñado para Angular. Ejecuta las pruebas en diferentes navegadores y muestra los resultados.
    - Ventajas de Karma
        - Soporte para múltiples navegadores: Pruebas en Chrome, Firefox, Safari, etc.
        - Ejecución continua: Detecta cambios en el código y ejecuta pruebas automáticamente.
        - Generación de informes: Muestra un informe con los resultados de la prueba.
    - Configuración inicial de Karma
        - Instalación inicial:
            - Cuando creas un nuevo proyecto Angular con `ng new`, Karma y Jasmine se instalan automáticamente.
        - Archivo de configuración de Karma:
            - El archivo `karma.conf.js` contiene la configuración de Karma. 
            - Desde aquí, se pueden personalizar los navegadores donde se ejecutarán las pruebas y otros parámetros.
        - Ejecutar pruebas con Karma:
            - Ejecutar las pruebas es simple con el comando: `ng test`

## Conclusión
El testing en Angular asegura la calidad, confianza y escalabilidad del código. Las metodologías TDD y BDD permiten crear pruebas sólidas antes de desarrollar la lógica. Con herramientas como **Jasmine** y **Karma**, se puede automatizar la ejecución de pruebas, asegurando la estabilidad de la aplicación antes de su lanzamiento.