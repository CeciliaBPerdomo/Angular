# API REST en angular
Una API REST (Representational State Transfer) es una forma de estructurar la comunicación entre un cliente (navegador o aplicación) y un servidor mediante la transferencia de recursos a través del protocolo HTTP. Las API REST permiten la creación de aplicaciones web dinámicas donde los clientes solicitan recursos (datos) del servidor, y el servidor responde con datos en formato JSON o XML.

## Relación cliente-servidor
- El cliente envía una solicitud al servidor (por ejemplo, para obtener datos de usuarios).
- El servidor responde con los datos requeridos.
- El cliente utiliza esos datos para mostrar contenido dinámico en la interfaz.

## Principales métodos HTTP

| 📡 **Método HTTP** | 📖 **Descripción**                              | 💡 **Ejemplo**                       |
|--------------------|-------------------------------------------------|--------------------------------------|
| `GET`              | Solicita recursos al servidor.                  | Obtener lista de usuarios.           |
| `POST`             | Envía datos para crear un nuevo recurso.        | Crear un nuevo usuario.              |
| `PUT`              | Actualiza completamente un recurso.             | Actualizar los datos de un usuario.  |
| `DELETE`           | Elimina un recurso.                             | Eliminar un usuario.                 |

### Ejemplo de interacción cliente-servidor
- El cliente envía una solicitud GET para obtener la lista de usuarios.
- El servidor responde con la lista de usuarios en formato JSON.
- El cliente muestra los datos al usuario en la interfaz gráfica.

## Configuración e Importación de HttpClientModule
- ¿Qué es HttpClientModule?
    - `HttpClientModule` es un módulo de Angular que permite realizar solicitudes HTTP. 
    - Es esencial para conectar la aplicación con una API REST y hacer solicitudes GET, POST, PUT y DELETE
- Pasos para la configuración
    - Importar `HttpClientModule` en `app.module.ts`
    ```typescript 
    import { HttpClientModule } from '@angular/common/http';

    @NgModule({ 
        declarations: [AppComponent], 
        imports: [BrowserModule, AppRoutingModule, HttpClientModule], 
        bootstrap: [AppComponent] 
    }) 
    export class AppModule {} 
    ```
    - Inyección de `HttpClient` en un componente 
     ```typescript 
    import { HttpClient } from '@angular/common/http';

    export class MiComponente { 
        constructor(private http: HttpClient) {}
        ngOnInit() { 
            this.http.get('https://api.ejemplo.com/usuarios') .subscribe(response => console.log(response)); 
        } 
    } 
    ```
- Con esta configuración, la aplicación podrá hacer solicitudes HTTP a una API REST.

## Uso de HttpClient para hacer solicitudes HTTP
Introducción a HttpClient Angular proporciona la clase HttpClient para realizar solicitudes HTTP de forma sencilla. Con esta clase, se pueden realizar operaciones GET, POST, PUT y DELETE.

### Ejemplos de cada método 
- **GET**: Solicitar datos de la API
    - `this.http.get('https://api.ejemplo.com/usuarios') .subscribe(response => console.log(response)); `
- **POST**: Enviar datos para crear un nuevo recurso
```ts 
const nuevoUsuario = { nombre: 'Pedro', edad: 30 }; 
this.http.post('https://api.ejemplo.com/usuarios', nuevoUsuario) .subscribe(response => console.log(response));
```
- **PUT**: Actualizar datos de un recurso
```ts 
const usuarioActualizado = { nombre: 'Pedro Actualizado', edad: 31 }; 
this.http.put('https://api.ejemplo.com/usuarios/1', usuarioActualizado) .subscribe(response => console.log(response));
```
- **DELETE**: Eliminar un recurso
    - `this.http.delete('https://api.ejemplo.com/usuarios/1') .subscribe(response => console.log(response));`
- Con estos métodos, se pueden gestionar CRUD (Create, Read, Update, Delete) en la API REST.

## Headers y Manejo de Errores
Uso de Headers Los headers (encabezados) permiten enviar información adicional en la solicitud HTTP. 
- Son importantes para:
    - Autenticación (por ejemplo, tokens Bearer). 
    - Control de acceso (CORS). 
    - Especificar formato de respuesta (JSON, XML). 
-  Ejemplo de configuración de Headers en una solicitud POST 
```ts 
const headers = { 'Content-Type': 'application/json' }; 

const nuevoUsuario = { 
    nombre: 'Lucía', 
    edad: 25 
};

this.http.post('https://api.ejemplo.com/usuarios', nuevoUsuario, { headers }) .subscribe(response => console.log(response));
```
- En este ejemplo:
    - `Content-Type`: Indica que la solicitud envía datos en formato JSON. 
    - La respuesta de la API se muestra en la consola. 

## Manejo de Errores 
Cuando se producen errores en las solicitudes HTTP (por ejemplo, errores 404 o 500), se pueden manejar utilizando `catchError` y `throwError`.
- Métodos utilizados
    - catchError: Captura los errores producidos durante la solicitud. 
    - throwError: Lanza un error personalizado. 
- Ejemplo de manejo de errores
```ts
import { catchError } from 'rxjs/operators'; 
import { throwError } from 'rxjs';

this.http.get('https://api.ejemplo.com/usuarios') .pipe( catchError(error => { 
    console.error('Error:', error); 
    return throwError('Error en la solicitud'); 
}) ) .subscribe(response => console.log(response));
```

- Explicación:
    - Se captura el error con catchError. 
    - Se muestra un mensaje de error en la consola. 
    - Se lanza una excepción personalizada con throwError. 

## Conclusión 
Con Angular y HttpClientModule, es posible consumir una API REST de forma sencilla y eficiente. La gestión de errores, el uso de headers y la configuración de solicitudes son aspectos clave para la creación de aplicaciones dinámicas y modernas.