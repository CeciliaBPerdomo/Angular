# API REST en angular
Una API REST (Representational State Transfer) es una forma de estructurar la comunicaci贸n entre un cliente (navegador o aplicaci贸n) y un servidor mediante la transferencia de recursos a trav茅s del protocolo HTTP. Las API REST permiten la creaci贸n de aplicaciones web din谩micas donde los clientes solicitan recursos (datos) del servidor, y el servidor responde con datos en formato JSON o XML.

## Relaci贸n cliente-servidor
- El cliente env铆a una solicitud al servidor (por ejemplo, para obtener datos de usuarios).
- El servidor responde con los datos requeridos.
- El cliente utiliza esos datos para mostrar contenido din谩mico en la interfaz.

## Principales m茅todos HTTP

|  **M茅todo HTTP** |  **Descripci贸n**                              |  **Ejemplo**                       |
|--------------------|-------------------------------------------------|--------------------------------------|
| `GET`              | Solicita recursos al servidor.                  | Obtener lista de usuarios.           |
| `POST`             | Env铆a datos para crear un nuevo recurso.        | Crear un nuevo usuario.              |
| `PUT`              | Actualiza completamente un recurso.             | Actualizar los datos de un usuario.  |
| `DELETE`           | Elimina un recurso.                             | Eliminar un usuario.                 |

### Ejemplo de interacci贸n cliente-servidor
- El cliente env铆a una solicitud GET para obtener la lista de usuarios.
- El servidor responde con la lista de usuarios en formato JSON.
- El cliente muestra los datos al usuario en la interfaz gr谩fica.

## Configuraci贸n e Importaci贸n de HttpClientModule
- 驴Qu茅 es HttpClientModule?
    - `HttpClientModule` es un m贸dulo de Angular que permite realizar solicitudes HTTP. 
    - Es esencial para conectar la aplicaci贸n con una API REST y hacer solicitudes GET, POST, PUT y DELETE
- Pasos para la configuraci贸n
    - Importar `HttpClientModule` en `app.module.ts`
    ```typescript 
    import { HttpClientModule } from '@angular/common/http';

    @NgModule({ 
        declarations: [AppComponent], 
        imports: [BrowserModule, AppRoutingModule, HttpClientModule], 
        bootstrap: [AppComponent] 
    }) 
    export class AppModule {} 
    ```
    - Inyecci贸n de `HttpClient` en un componente 
     ```typescript 
    import { HttpClient } from '@angular/common/http';

    export class MiComponente { 
        constructor(private http: HttpClient) {}
        ngOnInit() { 
            this.http.get('https://api.ejemplo.com/usuarios') .subscribe(response => console.log(response)); 
        } 
    } 
    ```
- Con esta configuraci贸n, la aplicaci贸n podr谩 hacer solicitudes HTTP a una API REST.

## Uso de HttpClient para hacer solicitudes HTTP
Introducci贸n a HttpClient Angular proporciona la clase HttpClient para realizar solicitudes HTTP de forma sencilla. Con esta clase, se pueden realizar operaciones GET, POST, PUT y DELETE.

### Ejemplos de cada m茅todo 
- **GET**: Solicitar datos de la API
    - `this.http.get('https://api.ejemplo.com/usuarios') .subscribe(response => console.log(response)); `
- **POST**: Enviar datos para crear un nuevo recurso
```ts 
const nuevoUsuario = { nombre: 'Pedro', edad: 30 }; 
this.http.post('https://api.ejemplo.com/usuarios', nuevoUsuario) .subscribe(response => console.log(response));
```
- **PUT**: Actualizar datos de un recurso
```ts 
const usuarioActualizado = { nombre: 'Pedro Actualizado', edad: 31 }; 
this.http.put('https://api.ejemplo.com/usuarios/1', usuarioActualizado) .subscribe(response => console.log(response));
```
- **DELETE**: Eliminar un recurso
    - `this.http.delete('https://api.ejemplo.com/usuarios/1') .subscribe(response => console.log(response));`
- Con estos m茅todos, se pueden gestionar CRUD (Create, Read, Update, Delete) en la API REST.

## Headers y Manejo de Errores
Uso de Headers Los headers (encabezados) permiten enviar informaci贸n adicional en la solicitud HTTP. 
- Son importantes para:
    - Autenticaci贸n (por ejemplo, tokens Bearer). 
    - Control de acceso (CORS). 
    - Especificar formato de respuesta (JSON, XML). 
-  Ejemplo de configuraci贸n de Headers en una solicitud POST 
```ts 
const headers = { 'Content-Type': 'application/json' }; 

const nuevoUsuario = { 
    nombre: 'Luc铆a', 
    edad: 25 
};

this.http.post('https://api.ejemplo.com/usuarios', nuevoUsuario, { headers }) .subscribe(response => console.log(response));
```
- En este ejemplo:
    - `Content-Type`: Indica que la solicitud env铆a datos en formato JSON. 
    - La respuesta de la API se muestra en la consola. 

## Manejo de Errores 
Cuando se producen errores en las solicitudes HTTP (por ejemplo, errores 404 o 500), se pueden manejar utilizando `catchError` y `throwError`.
- M茅todos utilizados
    - catchError: Captura los errores producidos durante la solicitud. 
    - throwError: Lanza un error personalizado. 
- Ejemplo de manejo de errores
```ts
import { catchError } from 'rxjs/operators'; 
import { throwError } from 'rxjs';

this.http.get('https://api.ejemplo.com/usuarios') .pipe( catchError(error => { 
    console.error('Error:', error); 
    return throwError('Error en la solicitud'); 
}) ) .subscribe(response => console.log(response));
```

- Explicaci贸n:
    - Se captura el error con catchError. 
    - Se muestra un mensaje de error en la consola. 
    - Se lanza una excepci贸n personalizada con throwError. 

## Conclusi贸n 
Con Angular y HttpClientModule, es posible consumir una API REST de forma sencilla y eficiente. La gesti贸n de errores, el uso de headers y la configuraci贸n de solicitudes son aspectos clave para la creaci贸n de aplicaciones din谩micas y modernas.